<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Peace SNS MVP</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
  <!-- ヘッダー -->
  <header class="bg-pink-200 p-4 text-center shadow">
    <h1 class="text-2xl font-bold text-pink-700">ようこそ Peace SNS へ！</h1>
  </header>

  <!-- ログイン／ログアウト -->
  <div class="text-center mt-4">
    <button id="login-button"
            class="bg-green-500 hover:bg-green-600 text-white rounded px-4 py-2 m-2">
      Googleでログイン
    </button>
    <button id="logout-button"
            class="hidden bg-gray-400 hover:bg-gray-500 text-white rounded px-4 py-2 m-2">
      ログアウト
    </button>
  </div>

  <!-- 投稿フォーム（ログイン後だけ表示） -->
  <div id="post-form-wrapper" class="hidden">
    <form id="post-form"
          class="flex flex-col gap-2 p-4 bg-white rounded shadow max-w-md mx-auto mt-6">

      <!-- 返信プレビュー -->
      <div id="reply-info"
           class="hidden text-sm text-blue-500 flex items-center justify-between">
        <span id="reply-text"></span>
        <button id="reply-cancel" class="text-xs text-red-500 underline">取消</button>
      </div>

      <!-- 入力は本文だけ -->
      <textarea id="post-content-input" rows="3" placeholder="投稿内容を入力…"
                class="border rounded p-2"></textarea>

      <button class="bg-pink-500 hover:bg-pink-600 text-white rounded p-2">
        投稿する
      </button>
    </form>
  </div>

  <!-- タイムライン -->
  <section id="timeline"
           class="flex flex-col gap-4 p-4 max-w-xl mx-auto mt-6"></section>

  <!-- 返信ポップアップ -->
  <div id="reply-popup"
       class="fixed inset-0 bg-black/40 hidden flex items-center justify-center z-50">
    <div class="bg-slate-900 text-white w-[420px] p-4 rounded-lg shadow-lg flex flex-col gap-3">
      <div class="flex justify-between items-center">
        <span class="font-bold">返信</span>
        <button id="popup-close" class="text-xl leading-none">&times;</button>
      </div>

      <div id="popup-parent"
           class="border-l-4 border-gray-500 pl-3 text-sm text-gray-300"></div>

      <textarea id="popup-input" rows="4"
                class="w-full rounded bg-slate-700 p-2 focus:outline-none"
                placeholder="返信を記入"></textarea>

      <div class="flex justify-end">
        <button id="popup-send"
                class="bg-pink-500 hover:bg-pink-600 text-white rounded px-4 py-2">
          ポストする
        </button>
      </div>
    </div>
  </div>

  <!-- ニックネーム登録モーダル -->
  <div id="nickname-modal"
       class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-80 shadow">
      <h2 class="text-lg font-bold mb-4 text-center text-pink-500">ニックネーム登録</h2>
      <input id="nickname-input" type="text" placeholder="ニックネームを入力…"
             class="border rounded w-full p-2 mb-4">
      <button id="nickname-submit"
              class="bg-pink-500 hover:bg-pink-600 text-white rounded px-4 py-2 block mx-auto">
        登録する
      </button>
    </div>
  </div>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-database-compat.js"></script>

  <!-- Firebase 初期化 -->
  <script>
    firebase.initializeApp({
      apiKey            : "AIzaSyBaRYrs7n_JoPJtt9rZ01Gl2KQ8DvNhd3k",
      authDomain        : "peace-sns.firebaseapp.com",
      databaseURL       : "https://peace-sns-default-rtdb.firebaseio.com",
      projectId         : "peace-sns",
      storageBucket     : "peace-sns.appspot.com",
      messagingSenderId : "787581748298",
      appId             : "1:787581748298:web:ce4c00c58cb0de341952b3"
    });
  </script>

  <script src="app.js" defer></script>
</body>
</html>
